---
sticker: emoji//1f600
---
[[쿠키]]

로그인 관련
```JAVA
//쿠키에 시간 정보를 주지 않으면 세션 쿠기(브라우저 종료시 모두 종료)  
Cookie idCookie = new Cookie("memberId", String.valueOf(loginMember.getId()));  
response.addCookie(idCookie);
```
  이렇게 서버에서 로그인 후 쿠키정보를 응답을 해주면 
  이 다음부터는 클라이언트가 요청을 보낼때 HTTP 요청 Cookie헤더에 Cookie정보를 담아서 보낸다.

로그아웃 관련
반대로 쿠키 휴지 시간을 0으로 셋팅하게 된다면 다시 브라우저에서 쿠키가 없어진다. 즉 로그아웃 된다.
```java
private void expireCookie(HttpServletResponse response, String cookieName) {  
Cookie cookie = new Cookie(cookieName, null);  
cookie.setMaxAge(0);  
response.addCookie(cookie);  
}
```

## 쿠키와 보안 문제

보안 문제
 쿠키 값은 임의로 클라이언트 상에서 변경할 수 있다.
- 클라이언트가 쿠키를 강제로 변경하면 다른 사용자가 된다.
- 쿠키에 보관된 정보는 훔쳐갈 수 있다.
- 해커가 쿠키를 훔쳐가면 그 쿠키로 악의적인 요청을 계속 시도할 수 있다.
대안
- 쿠키에 중요한 값을 노출하지 않고, 사용자 별로 예측 불가능한 임의의 토큰을 노출하고,서버에서 토큰과 사용자 id를매핑해서 인식한다. 그리고 서버에서 토큰을 관리한다. 

## 세션 직접 만들기
